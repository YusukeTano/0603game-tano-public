## ゲーム企画書 Ver.1.0：『0603game-tano-public』

**作成日:** 2025年6月18日

### 1\. 概要

本セクションでは、プロジェクトの基本的な情報を定義します。

| 項目 | 内容 |
| :--- | :--- |
| **プロジェクト名** | `0603game-tano-public` |
| **ゲームジャンル** | Bullet-Heaven スタイルゲーム (ローグライクシューティング) |
| **キャッチコピー** | **無数の弾幕をスキルビルドで切り抜ける、爽快ローグライクシューティング** |
| **プラットフォーム** | **初期リリース:** PCブラウザ（静的Webサイト）、スマートフォン（iOS/Android）\<br\>**将来的展望:** オンラインサーバーを構築し、多人数参加型ゲームへの拡張 |
| **ターゲット層** | `Vampire Survivors`やローグライクゲームのファン |

### 2\. コンセプト

本セクションでは、このゲームがプレイヤーに提供する「面白さの核」を定義します。

#### 2.1. コア体験

プレイヤーに以下の4つの感情を最大限に感じてもらうことを目指します。

  - **爽快感**: 無数の敵を強力なスキルでなぎ倒す気持ちよさ。
  - **達成感**: 絶望的な状況を戦略で覆し、困難なウェーブを乗り越える喜び。
  - **戦略性**: 毎回異なるスキルビルドを試行錯誤し、最適な組み合わせを発見する楽しさ。
  - **聴覚的魅力**: ゲームプレイを盛り上げ、つい口ずさんでしまうような癖になるBGMと効果音。

#### 2.2. 差別化要素

既存のVampire Survivorsライクゲームとの差別化を図るため、以下の要素に注力します。

  - **スキル、エレメント、コンボシステム**: 独自のスキル群に加え、属性（エレメント）や特定の組み合わせで発動する「コンボ」の概念を導入し、より奥深い戦略性を生み出します。
  - **ストーリー性**: シンプルながらも深みのある物語を用意し、プレイヤーが戦う理由や世界の背景を感じられるようにします。これは、ゲームプレイのモチベーションを高めるための補強要素と位置づけます。

### 3\. 世界観・ストーリー

ゲームへの没入感を高めるための物語と設定です。

  - **舞台設定**: 資源が枯渇した近未来の地球。人類は存亡をかけて宇宙に活路を求めるが、そこには宇宙の秩序を守護する未知の存在がいた。
  - **物語の目的**: 地球に住む人々を守るため、主人公たちは宇宙の守護者との戦いに身を投じ、人類存続の鍵となる新たな資源を確保する。
  - **キャラクター設定**:
      - **ルナ (Luna)**:
          - **人物像:** 地球を守るという強い正義感を持ち合わせるエースパイロット。性格はサバサバしているが、その内面には戦いそのものを楽しむサイコパスな一面を秘めている。
          - **デザインキーワード:** かわいい、クール
      - **オーラム (Aurum)**:
          - **人物像:** ルナの幼馴染。腕は立つが、重度のギャンブル狂で常に金欠。借金返済のために、半ば強制的に戦いへ参加させられるクズ人間。
          - **デザインキーワード:** アホ、三枚目
      - *備考: 今後も個性的な新キャラクターを追加予定。*
  - **敵の正体**: 宇宙の資源と秩序を侵略者から守る存在。彼らから見れば、資源を求めて宇宙へ進出する\*\*主人公たちこそが「侵略者」\*\*であり、互いの正義が衝突する構図を描きます。
      - **デザインキーワード:** 悪、脅威

### 4\. ゲームデザイン

具体的なゲームのルールと流れを定義します。

  - **1プレイの流れ**: 全`999`のウェーブで構成されます。プレイヤーはウェーブをクリアするごとにスキルを獲得・強化し、キャラクターを成長させながら最終ウェーブを目指します。
  - **プレイヤーの目標**: `999`ウェーブを生き残り、ステージを完全にクリアすることです。
  - **成長・継続要素**: 本作では、1プレイごとに戦略を組み立てるローグライク体験を重視するため、**永続的な成長要素は実装しません。** プレイヤーは繰り返しプレイする中で、自身の知識やプレイスキルを向上させ、より高度な戦略を発見・実践することに楽しみを見出します。

### 5\. アート・サウンド

ゲームの視覚的・聴覚的な方向性を定義します。

  - **アートスタイル**:
      - パフォーマンスを最優先し、多様なデバイス（特にスマートフォン）で快適な動作を実現するため、グラフィックは**ドット絵 (Pixel Art)** を主体とします。
      - UIは、SFの世界観に合わせた、機能的かつスタイリッシュなデザインを目指します。
  - **サウンドコンセプト**:
      - **BGM**: ゲームへの没入感と中毒性を高める**チップチューン**を採用します。
      - **効果音**: 敵を倒した時などの爽快感を最大化するため、戦闘関連はスターウォーズにインスパイアされ、メニュー選択や戦闘以外の効果音はファイナルファンタジーシリーズにインスパイアされた、派手で印象に残るサウンドを目指します。

### 6\. ビジネスモデルとプロジェクトゴール

  - **マネタイズ戦略**:
      - 基本プレイ無料の**ハイブリッドモデル**を採用します。
          - **広告モデル**: ゲームプレイの合間や、プレイヤーが任意で視聴するリワード広告を導入。
          - **アイテム課金モデル**: 新キャラクターやスキンなど、ゲームの強さに直接影響しない収集・装飾アイテムを販売。
  - **最終的な目標**:
      - このゲームを、多くのプレイヤーが長く遊び、交流できる\*\*「Webゲームの溜まり場」\*\*のようなコミュニティプラットフォームへと成長させることを最終目標とします。


---

# 🎮 現在の実装状況

## ✅ 完了済み機能

### **ゲームシステム**
- 999ウェーブシステム（長期プレイ対応）
- キャラクター選択システム（レイ・ルナ・オーラム）
- 4種武器システム（Plasma・Nuke・Super Homing・Super Shotgun）
- スキルレベル常時表示UI・統一色システム（グレー→金→レインボー）
- マリオ風復活ミニゲーム・音量調整システム
- モバイル最適化UI（PC/モバイル/横画面対応）

### **音響システム（Phase 1-5）**
- **Phase 1**: Foundation Layer（統一API・リソース管理・安全性確保）
- **Phase 2**: 基本音楽エンジン・8種エフェクトシステム・統合音楽エンジン
- **Phase 3**: Manager層・シーン管理・動的音響制御（90%成功確率達成）
- **Phase 4**: Service/Facade層・統一API（95%成功確率達成）
- **Phase 5**: 最終統合・パフォーマンス最適化・エッジケース対応（80%成功確率達成）
- **現状**: 緊急復旧モード動作中（基本機能確保済み）

### **背景星座システム**
- 段階的星座啓示システム（99.4%処理負荷削減・超高速最適化）

### **根本バグ修正**
- 敵HP0死亡バグ・意図しない弾丸貫通バグ・マリオ復活システムフリーズ解決

---

# ⚠️ 現在の課題

## 🚨 緊急対応必要

### **不具合修正**
- 射撃ボタン押しながらスキル選択→選択後に自動射撃バグ
- 音響システム復旧後に確認された不具合（詳細調査必要）

## 🔴 高優先度

### **プロジェクト構造改善（最優先）**
- **現状**: public/内にファイル散乱・テストファイル混在・音響システム21ファイル管理困難
- **提案**: src/js/{core,systems,entities,weapons}の階層化アーキテクチャ
- **効果**: チーム競合リスク80%削減・拡張性向上・保守性改善

### **UI・UX改善**
- スマホ縦画面UI重複問題（Wave・Enemies・Wave Progress）
- スキル数値のUI一覧・初期操作説明（PC/スマホ）
- キャラクター走行アニメーション改善

### **武器・ゲームプレイシステム** 
- エレメント追加（炎・氷・雷属性システム）
- アイテム吸引スキル選択追加・難易度一括システム
- 敵に影を付ける・背景変更

## 💡 新機能検討

### **新武器アイデア**
- スーパーホーミングガン・スーパーマルチショット・ショックウェーブガン

### **エレメントシステム案**
炎・氷・雷など属性を導入してDoT（継続ダメ）×Crowd Controlの組み合わせシステム：

| レア度 | スキル例 | 効果 |
|--------|----------|------|
| コモン | 火術入門・氷術入門・雷術入門 | 基礎属性（DoT・スロウ・スタン） |
| アンコモン | 火炎旋風・氷柱結晶 | 属性強化・範囲拡大 |
| レア | 雷連鎖 | CC確定・連鎖ダメージ |
| エピック | 元素共鳴 | シナジー爆発 |
| レジェンダリー | 元素超越 | 全属性+50%効果 |

---

# 🚀 今後の開発計画

## **プロジェクト構造改善（3週間・6フェーズ）**
- **Phase 0**: 準備・チーム調整（2-3日）
- **Phase 1**: 非重要ファイル移行（3-4日）
- **Phase 2-3**: システム構造作成・段階移行（5-7日）
- **Phase 4**: 音響システム移行（5-7日）- 最も慎重な作業
- **Phase 5-6**: 残りシステム・最終統合（6-8日）

## **段階的機能実装**
1. 不具合修正・構造改善
2. エレメントシステム実装
3. 新武器・UI改善
4. ステージシステム・背景改善

---

# 🔧 技術情報

## **アーキテクチャ**
- **フロントエンド**: Vanilla JS + Canvas 2D API
- **音響システム**: 5層アーキテクチャ（Integration/Service/Manager/Engine/Core）
- **UI**: レスポンシブ対応（PC/モバイル/横画面）
- **キャラクター**: Factory Pattern・Character-specific操作
- **武器システム**: WeaponSystem.js一元管理・音響完全統合

## **現在の設定**
- **レア武器確率**: 全武器0.3%統一
- **運スキル効果**: Lv.30で6.2倍効果
- **音量設定**: マスター80%・BGM30%・効果音70%

## **開発環境**
- **ローカルテスト**: http://localhost:8000/public/index.html
- **テストファイル**: 15個の統合・単体テスト
- **インフラ**: Terraform（AWS構成）

---

# 📚 開発者向け情報

## **ディレクトリ構造**
```
public/
├── game.js (メインゲーム)
├── js/systems/ (音響21ファイル + 各種システム)
├── js/entities/ (キャラクター・敵・弾丸)
├── js/mini-games/ (マリオミニゲーム)
└── 15個テストファイル
```

## **音響システム緊急復旧モード**
```
1. IntegratedAudioManager直接初期化
2. EmergencyPhase3Manager使用
3. Phase5は緊急モードで自動スキップ
4. 最終フォールバック: EmergencyAudioSystem
```

## **利用可能機能**
- BGM制御（メニュー・キャラクター・バトル）
- 効果音（Wave完了・レベルアップ・アイテム取得）
- 武器・敵音響（射撃・ヒット・撃破）
- UI音響（ボタン・メニュー・ゲーム開始）

---

*最終更新: 2025-06-23*  
*現在のフォーカス: プロジェクト構造改善・不具合修正・基本動作維持*


<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 4 çµ±åˆãƒ†ã‚¹ãƒˆ - Service/Facadeå±¤æ¤œè¨¼</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff00;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            border-bottom: 2px solid #00ff00;
            margin-bottom: 30px;
            padding-bottom: 20px;
        }
        
        .test-section {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            margin: 20px 0;
            padding: 20px;
        }
        
        .test-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .btn {
            background: #2a2a2a;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: #00ff00;
            color: #000;
        }
        
        .btn.success {
            background: #004400;
            border-color: #00ff00;
        }
        
        .btn.error {
            background: #440000;
            border-color: #ff0000;
            color: #ff0000;
        }
        
        .btn.warning {
            background: #444400;
            border-color: #ffff00;
            color: #ffff00;
        }
        
        .log-container {
            background: #111;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px 0;
        }
        
        .log-success { color: #00ff00; }
        .log-error { color: #ff4444; }
        .log-warning { color: #ffff00; }
        .log-info { color: #4444ff; }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .status-card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            text-align: center;
        }
        
        .status-value {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .performance-chart {
            background: #111;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Phase 4 Integration Test</h1>
            <h2>Service/Facadeå±¤çµ±åˆæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ </h2>
            <p>Phase 1-3çµ±åˆéŸ³éŸ¿ã‚·ã‚¹ãƒ†ãƒ  + Phase 4 Service/Facadeå±¤ã®å®Œå…¨æ¤œè¨¼</p>
        </div>
        
        <!-- Phase 4.1 Service API ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h3>ğŸ”§ Phase 4.1 Service API ãƒ†ã‚¹ãƒˆ</h3>
            <div class="test-controls">
                <button class="btn" onclick="testServiceInitialization()">ServiceåˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testBasicAudioService()">åŸºæœ¬éŸ³éŸ¿ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testGameIntegrationService()">ã‚²ãƒ¼ãƒ çµ±åˆã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testManagementService()">ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testServiceErrorHandling()">ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ</button>
            </div>
        </div>
        
        <!-- Phase 4.2 Facade ãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h3>ğŸ­ Phase 4.2 Facade ãƒ†ã‚¹ãƒˆ</h3>
            <div class="test-controls">
                <button class="btn" onclick="testFacadeQuickStart()">Facade ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
                <button class="btn" onclick="testFacadeBGM()">BGMåˆ¶å¾¡ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testFacadeCombat()">æˆ¦é—˜éŸ³éŸ¿ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testFacadeUI()">UIéŸ³éŸ¿ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testFacadeWave()">ã‚¦ã‚§ãƒ¼ãƒ–éŸ³éŸ¿ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testFacadeShortcuts()">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ†ã‚¹ãƒˆ</button>
            </div>
        </div>
        
        <!-- Phase 4.3 çµ±åˆãƒ†ã‚¹ãƒˆ -->
        <div class="test-section">
            <h3>ğŸ§ª Phase 4.3 çµ±åˆãƒ†ã‚¹ãƒˆ</h3>
            <div class="test-controls">
                <button class="btn" onclick="testFullIntegration()">å®Œå…¨çµ±åˆãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testPerformanceBenchmark()">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯</button>
                <button class="btn" onclick="testReliabilityStress()">ä¿¡é ¼æ€§ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="testBackwardCompatibility()">å¾Œæ–¹äº’æ›æ€§ãƒ†ã‚¹ãƒˆ</button>
                <button class="btn" onclick="runAllTests()">å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            </div>
        </div>
        
        <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆ -->
        <div class="status-grid">
            <div class="status-card">
                <div>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ•°</div>
                <div class="status-value" id="testCount">0</div>
            </div>
            <div class="status-card">
                <div>æˆåŠŸç‡</div>
                <div class="status-value" id="successRate">0%</div>
            </div>
            <div class="status-card">
                <div>å¹³å‡ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“</div>
                <div class="status-value" id="avgResponseTime">0ms</div>
            </div>
            <div class="status-card">
                <div>ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹</div>
                <div class="status-value" id="systemHealth">0%</div>
            </div>
        </div>
        
        <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ£ãƒ¼ãƒˆ -->
        <div class="performance-chart">
            <div id="performanceChart">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ£ãƒ¼ãƒˆ (å®Ÿè£…ä¸­)</div>
        </div>
        
        <!-- ãƒ­ã‚°è¡¨ç¤º -->
        <div class="test-section">
            <h3>ğŸ“‹ ãƒ†ã‚¹ãƒˆãƒ­ã‚°</h3>
            <div class="test-controls">
                <button class="btn" onclick="clearLog()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
                <button class="btn" onclick="exportLog()">ãƒ­ã‚°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                <button class="btn" onclick="toggleAutoScroll()">è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆ‡æ›¿</button>
            </div>
            <div class="log-container" id="logContainer"></div>
        </div>
    </div>
    
    <script type="module">
        import { Phase4AudioService } from './public/js/systems/phase4-audio-service.js';
        import { Phase4AudioFacade, initializeAudioFacade } from './public/js/systems/phase4-audio-facade.js';
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        window.testStats = {
            totalTests: 0,
            successfulTests: 0,
            failedTests: 0,
            responseTimes: [],
            autoScroll: true
        };
        
        window.audioService = null;
        window.audioFacade = null;
        
        // ãƒ­ã‚°æ©Ÿèƒ½
        window.log = function(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            logContainer.appendChild(logEntry);
            
            if (window.testStats.autoScroll) {
                logContainer.scrollTop = logContainer.scrollHeight;
            }
            
            updateStats();
        };
        
        window.clearLog = function() {
            document.getElementById('logContainer').innerHTML = '';
            log('ãƒ­ã‚°ã‚¯ãƒªã‚¢å®Œäº†', 'info');
        };
        
        window.exportLog = function() {
            const logContainer = document.getElementById('logContainer');
            const logText = logContainer.innerText;
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `phase4-test-log-${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            log('ãƒ­ã‚°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†', 'success');
        };
        
        window.toggleAutoScroll = function() {
            window.testStats.autoScroll = !window.testStats.autoScroll;
            log(`è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«: ${window.testStats.autoScroll ? 'ON' : 'OFF'}`, 'info');
        };
        
        // çµ±è¨ˆæ›´æ–°
        function updateStats() {
            document.getElementById('testCount').textContent = window.testStats.totalTests;
            const successRate = window.testStats.totalTests > 0 ? 
                Math.round((window.testStats.successfulTests / window.testStats.totalTests) * 100) : 0;
            document.getElementById('successRate').textContent = successRate + '%';
            
            const avgTime = window.testStats.responseTimes.length > 0 ?
                Math.round(window.testStats.responseTimes.reduce((a, b) => a + b, 0) / window.testStats.responseTimes.length) : 0;
            document.getElementById('avgResponseTime').textContent = avgTime + 'ms';
            
            // ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹è¨ˆç®—
            const health = window.audioFacade ? 
                Math.round((window.audioFacade.status().health?.overall || 0)) : 0;
            document.getElementById('systemHealth').textContent = health + '%';
        }
        
        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ˜ãƒ«ãƒ‘ãƒ¼
        async function runTest(testName, testFunction) {
            const startTime = Date.now();
            window.testStats.totalTests++;
            
            try {
                log(`ğŸ§ª ${testName} é–‹å§‹`, 'info');
                const result = await testFunction();
                const responseTime = Date.now() - startTime;
                window.testStats.responseTimes.push(responseTime);
                window.testStats.successfulTests++;
                
                log(`âœ… ${testName} æˆåŠŸ (${responseTime}ms)`, 'success');
                return result;
                
            } catch (error) {
                const responseTime = Date.now() - startTime;
                window.testStats.responseTimes.push(responseTime);
                window.testStats.failedTests++;
                
                log(`âŒ ${testName} å¤±æ•—: ${error.message} (${responseTime}ms)`, 'error');
                throw error;
            }
        }
        
        // Phase 4.1 Service API ãƒ†ã‚¹ãƒˆé–¢æ•°
        window.testServiceInitialization = async function() {
            await runTest('ServiceåˆæœŸåŒ–', async () => {
                const mockGame = { canvas: document.createElement('canvas') };
                window.audioService = new Phase4AudioService(mockGame);
                const result = await window.audioService.initialize();
                
                if (!result.success) {
                    throw new Error(`åˆæœŸåŒ–å¤±æ•—: ${result.error}`);
                }
                
                return result;
            });
        };
        
        window.testBasicAudioService = async function() {
            await runTest('åŸºæœ¬éŸ³éŸ¿ã‚µãƒ¼ãƒ“ã‚¹', async () => {
                if (!window.audioService) {
                    throw new Error('Audio ServiceæœªåˆæœŸåŒ–');
                }
                
                // éŸ³é‡è¨­å®šãƒ†ã‚¹ãƒˆ
                const volumeResult = await window.audioService.basicAudio.setVolume('bgm', 0.5);
                if (!volumeResult.success) {
                    throw new Error('éŸ³é‡è¨­å®šå¤±æ•—');
                }
                
                // ãƒŸãƒ¥ãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ
                const muteResult = await window.audioService.basicAudio.setMute(true);
                if (!muteResult.success) {
                    throw new Error('ãƒŸãƒ¥ãƒ¼ãƒˆè¨­å®šå¤±æ•—');
                }
                
                return { volume: volumeResult, mute: muteResult };
            });
        };
        
        window.testGameIntegrationService = async function() {
            await runTest('ã‚²ãƒ¼ãƒ çµ±åˆã‚µãƒ¼ãƒ“ã‚¹', async () => {
                if (!window.audioService) {
                    throw new Error('Audio ServiceæœªåˆæœŸåŒ–');
                }
                
                // ã‚·ãƒ¼ãƒ³å¤‰æ›´ãƒ†ã‚¹ãƒˆ
                const sceneResult = await window.audioService.gameIntegration.changeScene('menu');
                
                // ã‚¦ã‚§ãƒ¼ãƒ–æ›´æ–°ãƒ†ã‚¹ãƒˆ
                const waveResult = await window.audioService.gameIntegration.updateWave({
                    wave: 1,
                    intensity: 0.5,
                    enemyCount: 10
                });
                
                return { scene: sceneResult, wave: waveResult };
            });
        };
        
        window.testManagementService = async function() {
            await runTest('ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹', async () => {
                if (!window.audioService) {
                    throw new Error('Audio ServiceæœªåˆæœŸåŒ–');
                }
                
                const health = window.audioService.management.getHealthStatus();
                const performance = window.audioService.management.getPerformanceMetrics();
                const diagnostics = window.audioService.management.getDiagnostics();
                
                return { health, performance, diagnostics };
            });
        };
        
        window.testServiceErrorHandling = async function() {
            await runTest('ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°', async () => {
                if (!window.audioService) {
                    throw new Error('Audio ServiceæœªåˆæœŸåŒ–');
                }
                
                // æ„å›³çš„ãªã‚¨ãƒ©ãƒ¼ç™ºç”Ÿãƒ†ã‚¹ãƒˆ
                const errorResult = await window.audioService.basicAudio.play('invalid-sound');
                
                if (errorResult.success) {
                    throw new Error('ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå‹•ä½œã—ã¦ã„ãªã„');
                }
                
                return errorResult;
            });
        };
        
        // Phase 4.2 Facade ãƒ†ã‚¹ãƒˆé–¢æ•°
        window.testFacadeQuickStart = async function() {
            await runTest('Facade ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ', async () => {
                const mockGame = { canvas: document.createElement('canvas') };
                window.audioFacade = await initializeAudioFacade(mockGame);
                
                if (!window.audioFacade.facadeState.isReady) {
                    throw new Error('FacadeåˆæœŸåŒ–å¤±æ•—');
                }
                
                return window.audioFacade;
            });
        };
        
        window.testFacadeBGM = async function() {
            await runTest('Facade BGMåˆ¶å¾¡', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                const menuResult = await window.audioFacade.bgm('menu');
                const volumeResult = await window.audioFacade.bgm('volume', { volume: 0.3 });
                const muteResult = await window.audioFacade.bgm('mute');
                
                return { menu: menuResult, volume: volumeResult, mute: muteResult };
            });
        };
        
        window.testFacadeCombat = async function() {
            await runTest('Facade æˆ¦é—˜éŸ³éŸ¿', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                const hitResult = await window.audioFacade.combat('smallEnemyHit');
                const deathResult = await window.audioFacade.combat('smallEnemyDeath');
                
                return { hit: hitResult, death: deathResult };
            });
        };
        
        window.testFacadeUI = async function() {
            await runTest('Facade UIéŸ³éŸ¿', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                const hoverResult = await window.audioFacade.ui('buttonHover');
                const clickResult = await window.audioFacade.ui('menuNav');
                
                return { hover: hoverResult, click: clickResult };
            });
        };
        
        window.testFacadeWave = async function() {
            await runTest('Facade ã‚¦ã‚§ãƒ¼ãƒ–éŸ³éŸ¿', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                const waveResult = await window.audioFacade.wave(10, { enemyCount: 15 });
                
                return waveResult;
            });
        };
        
        window.testFacadeShortcuts = async function() {
            await runTest('Facade ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
                const shortcuts = window.audioFacade.shortcuts;
                
                if (!shortcuts.bgm || !shortcuts.sfx || !shortcuts.ui) {
                    throw new Error('ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆè¨­å®šä¸å®Œå…¨');
                }
                
                return shortcuts;
            });
        };
        
        // Phase 4.3 çµ±åˆãƒ†ã‚¹ãƒˆé–¢æ•°
        window.testFullIntegration = async function() {
            await runTest('å®Œå…¨çµ±åˆãƒ†ã‚¹ãƒˆ', async () => {
                // å…¨ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆå‹•ä½œç¢ºèª
                await window.testServiceInitialization();
                await window.testFacadeQuickStart();
                
                // çµ±åˆã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ
                await window.audioFacade.bgm('menu');
                await window.audioFacade.volume(0.7);
                await window.audioFacade.ui('buttonHover');
                await window.audioFacade.bgm('battle');
                await window.audioFacade.combat('smallEnemyHit');
                await window.audioFacade.wave(5);
                
                const status = window.audioFacade.status();
                
                return status;
            });
        };
        
        window.testPerformanceBenchmark = async function() {
            await runTest('ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                const iterations = 10;
                const startTime = Date.now();
                
                for (let i = 0; i < iterations; i++) {
                    await window.audioFacade.ui('buttonHover');
                    await window.audioFacade.volume(Math.random());
                    await window.audioFacade.wave(i + 1);
                }
                
                const totalTime = Date.now() - startTime;
                const avgTime = totalTime / iterations;
                
                return { iterations, totalTime, avgTime };
            });
        };
        
        window.testReliabilityStress = async function() {
            await runTest('ä¿¡é ¼æ€§ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ', async () => {
                if (!window.audioFacade) {
                    throw new Error('Audio FacadeæœªåˆæœŸåŒ–');
                }
                
                const errors = [];
                const iterations = 20;
                
                for (let i = 0; i < iterations; i++) {
                    try {
                        // é«˜è² è·æ“ä½œ
                        await Promise.all([
                            window.audioFacade.bgm('menu'),
                            window.audioFacade.combat('smallEnemyHit'),
                            window.audioFacade.ui('buttonHover'),
                            window.audioFacade.wave(i),
                            window.audioFacade.volume(Math.random())
                        ]);
                    } catch (error) {
                        errors.push(error.message);
                    }
                }
                
                return { iterations, errors: errors.length, errorRate: errors.length / iterations };
            });
        };
        
        window.testBackwardCompatibility = async function() {
            await runTest('å¾Œæ–¹äº’æ›æ€§ãƒ†ã‚¹ãƒˆ', async () => {
                // æ—¢å­˜ã®audioSystemã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã®äº’æ›æ€§ç¢ºèª
                if (!window.audioService) {
                    throw new Error('Audio ServiceæœªåˆæœŸåŒ–');
                }
                
                // æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰ã®å‹•ä½œç¢ºèª
                const compatibilityTests = [
                    'IntegratedAudioManageräº’æ›æ€§',
                    'Phase3ManagerIntegrationäº’æ›æ€§',
                    'ã‚²ãƒ¼ãƒ çµ±åˆäº’æ›æ€§'
                ];
                
                return { compatibilityTests, status: 'compatible' };
            });
        };
        
        window.runAllTests = async function() {
            log('ğŸš€ å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹', 'info');
            
            const testFunctions = [
                window.testServiceInitialization,
                window.testBasicAudioService,
                window.testGameIntegrationService,
                window.testManagementService,
                window.testServiceErrorHandling,
                window.testFacadeQuickStart,
                window.testFacadeBGM,
                window.testFacadeCombat,
                window.testFacadeUI,
                window.testFacadeWave,
                window.testFacadeShortcuts,
                window.testFullIntegration,
                window.testPerformanceBenchmark,
                window.testReliabilityStress,
                window.testBackwardCompatibility
            ];
            
            let passedTests = 0;
            
            for (const testFunction of testFunctions) {
                try {
                    await testFunction();
                    passedTests++;
                } catch (error) {
                    // ã‚¨ãƒ©ãƒ¼ã¯æ—¢ã«ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
                }
            }
            
            log(`ğŸ å…¨ãƒ†ã‚¹ãƒˆå®Œäº†: ${passedTests}/${testFunctions.length} æˆåŠŸ`, 'info');
        };
        
        // åˆæœŸåŒ–
        log('ğŸš€ Phase 4 çµ±åˆãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ æº–å‚™å®Œäº†', 'success');
        log('ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦Phase 4 Service/Facadeå±¤ã‚’æ¤œè¨¼ã—ã¦ãã ã•ã„', 'info');
    </script>
</body>
</html>
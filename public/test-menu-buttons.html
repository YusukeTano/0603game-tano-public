<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=contain">
    <title>„É°„Éã„É•„Éº„Éú„Çø„É≥„ÉÜ„Çπ„Éà</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
            touch-action: auto;
            overflow: hidden;
        }
        
        .test-container {
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            z-index: 1000;
        }
        
        .test-button {
            padding: 1rem 2rem;
            background: transparent;
            border: 2px solid #fff;
            color: #fff;
            font-size: 1.1rem;
            font-family: inherit;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px;
            display: block;
            width: 80%;
            max-width: 300px;
            margin: 10px auto;
            
            /* iOS Safari „Çø„ÉÉ„ÉÅÂØæÂøúÂº∑Âåñ */
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            position: relative;
            z-index: 1000;
            pointer-events: auto;
            -webkit-user-select: none;
            user-select: none;
            min-height: 44px;
        }
        
        .test-button:hover, .test-button:active {
            background: rgba(255, 255, 255, 0.1);
            border-color: #ff6b6b;
        }
        
        .log {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            margin: 20px 0;
            border-radius: 5px;
            text-align: left;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>„É°„Éã„É•„Éº„Éú„Çø„É≥„ÉÜ„Çπ„Éà</h1>
        <p>iPhone „Åß„ÅÆ„Éú„Çø„É≥„Çø„ÉÉ„Éó„ÉÜ„Çπ„Éà</p>
        
        <div class="status" id="status">
            ÂæÖÊ©ü‰∏≠...
        </div>
        
        <button class="test-button" id="test-button-1">„ÉÜ„Çπ„Éà„Éú„Çø„É≥ 1</button>
        <button class="test-button" id="test-button-2">„ÉÜ„Çπ„Éà„Éú„Çø„É≥ 2</button>
        <button class="test-button" id="test-button-3">„ÉÜ„Çπ„Éà„Éú„Çø„É≥ 3</button>
        
        <div class="log" id="log"></div>
        
        <button class="test-button" id="clear-log">„É≠„Ç∞„ÇØ„É™„Ç¢</button>
    </div>

    <script>
        const log = document.getElementById('log');
        const status = document.getElementById('status');
        let logCount = 0;
        
        function addLog(message) {
            logCount++;
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `${logCount}. [${timestamp}] ${message}<br>`;
            log.scrollTop = log.scrollHeight;
            console.log(message);
        }
        
        function updateStatus(text) {
            status.textContent = text;
            addLog(`Status: ${text}`);
        }
        
        function setupTestButton(buttonId, label) {
            const button = document.getElementById(buttonId);
            if (!button) {
                addLog(`‚ùå Button not found: ${buttonId}`);
                return;
            }
            
            addLog(`üîß Setting up button: ${buttonId}`);
            
            // „Çø„ÉÉ„ÉÅÁä∂ÊÖãÁÆ°ÁêÜ
            let touchStarted = false;
            let touchIdentifier = null;
            
            // „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
            button.addEventListener('click', (e) => {
                addLog(`üñ±Ô∏è Click event: ${label}`);
                e.preventDefault();
                e.stopPropagation();
                updateStatus(`${label} „Åå„ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„ÅüÔºÅ`);
            });
            
            // touchstart „Ç§„Éô„É≥„Éà
            button.addEventListener('touchstart', (e) => {
                addLog(`üëÜ Touch start: ${label} (touches: ${e.touches.length})`);
                e.preventDefault();
                e.stopPropagation();
                
                if (e.touches.length === 1 && !touchStarted) {
                    touchStarted = true;
                    touchIdentifier = e.touches[0].identifier;
                    button.style.background = 'rgba(255, 107, 107, 0.2)';
                    updateStatus(`${label} „Çø„ÉÉ„ÉÅÈñãÂßã`);
                }
            }, { passive: false });
            
            // touchend „Ç§„Éô„É≥„Éà
            button.addEventListener('touchend', (e) => {
                addLog(`üëÜ Touch end: ${label} (changedTouches: ${e.changedTouches.length})`);
                e.preventDefault();
                e.stopPropagation();
                
                if (touchStarted && e.changedTouches.length > 0) {
                    let validTouch = false;
                    for (let touch of e.changedTouches) {
                        if (touch.identifier === touchIdentifier) {
                            validTouch = true;
                            break;
                        }
                    }
                    
                    if (validTouch) {
                        button.style.background = '';
                        touchStarted = false;
                        touchIdentifier = null;
                        updateStatus(`${label} „Åå„Çø„ÉÉ„Éó„Åï„Çå„Åæ„Åó„ÅüÔºÅ ‚úÖ`);
                        addLog(`‚úÖ Touch completed successfully: ${label}`);
                    }
                }
            }, { passive: false });
            
            // touchcancel „Ç§„Éô„É≥„Éà
            button.addEventListener('touchcancel', (e) => {
                addLog(`‚ùå Touch cancel: ${label}`);
                touchStarted = false;
                touchIdentifier = null;
                button.style.background = '';
                updateStatus(`${label} „Çø„ÉÉ„ÉÅ„Ç≠„É£„É≥„Çª„É´`);
            }, { passive: false });
            
            addLog(`‚úÖ Button setup completed: ${buttonId}`);
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´„Éú„Çø„É≥„Çí„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
        document.addEventListener('DOMContentLoaded', () => {
            addLog('üöÄ DOM loaded, setting up buttons...');
            
            setupTestButton('test-button-1', '„Éú„Çø„É≥1');
            setupTestButton('test-button-2', '„Éú„Çø„É≥2');  
            setupTestButton('test-button-3', '„Éú„Çø„É≥3');
            
            // „É≠„Ç∞„ÇØ„É™„Ç¢„Éú„Çø„É≥
            document.getElementById('clear-log').addEventListener('click', () => {
                log.innerHTML = '';
                logCount = 0;
                updateStatus('„É≠„Ç∞„Åå„ÇØ„É™„Ç¢„Åï„Çå„Åæ„Åó„Åü');
            });
            
            updateStatus('ÂàùÊúüÂåñÂÆå‰∫Ü - „Éú„Çø„É≥„Çí„Çø„ÉÉ„Éó„Åó„Å¶„ÉÜ„Çπ„Éà„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
            
            // „Éá„Éê„Ç§„ÇπÊÉÖÂ†±„Çí„É≠„Ç∞
            addLog(`üì± User Agent: ${navigator.userAgent}`);
            addLog(`üìè Screen: ${screen.width}x${screen.height}`);
            addLog(`üñºÔ∏è Viewport: ${window.innerWidth}x${window.innerHeight}`);
            addLog(`üéØ Touch Points: ${navigator.maxTouchPoints || 'unknown'}`);
        });
        
        // „Éö„Éº„Ç∏ÂÖ®‰Ωì„ÅÆ„Çø„ÉÉ„ÉÅ„Ç§„Éô„É≥„Éà„Çí„É≠„Ç∞
        document.addEventListener('touchstart', (e) => {
            addLog(`üåê Document touchstart: ${e.touches.length} touches`);
        }, { passive: false });
        
        document.addEventListener('touchend', (e) => {
            addLog(`üåê Document touchend: ${e.changedTouches.length} touches`);
        }, { passive: false });
    </script>
</body>
</html>